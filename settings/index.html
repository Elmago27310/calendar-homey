<!DOCTYPE html>
<html>
    <head>
        <style>
            .icons-info {
                color: grey;
                font-size: smaller;
            }
        </style>

        <!-- Homey settings -->
        <script type="text/javascript" src="/homey.js" data-origin="settings"></script>
      </head>
      
      <body>

        <h1 data-i18n="settings.title">
            <!--
                This field will automatically be filled by a translated string with key 'settings.title'.
                Read more about translations at Internationalization.
        	-->
        </h1>

        <fieldset>
            <legend>URI settings</legend>

            <div class="field row">
                <input id="uri" type="text" value="" />
            </div>

        </fieldset>

        <button id="save" class="right">Save changes</button>

        <p class="icons-info">Icons by <a href="https://icons8.com/">Icons8</a></p>
        
        <script type="text/javascript">
            // a method named 'onHomeyReady' must be present in your code
            function onHomeyReady(Homey) {
                // Tell Homey we're ready to be displayed
                Homey.ready();

                var uriElement = document.getElementById('uri');
                var saveElement = document.getElementById('save');

                Homey.get('uri', function( err, uri ) {
                    if (err) return Homey.alert(err);
                    uriElement.value = uri;
                });

                saveElement.addEventListener('click', function(e) {
                    Homey.set('uri', uriElement.value, function(err) {
                        if(err) return Homey.alert(err);
                    });

                    Homey.alert(Homey.__('settings.saved_alert'), 'info');
                });
            }
        </script>

      </body>
</html>